/ {

    amba: amba {
        i2c@ff030000 {
            i2cswitch@70 {
                i2c@0 {

                    /* idt8t49n241 i2c clock generator */
                    idt8t49n24x: clock-generator@6c {
                        status = "okay";
                        compatible = "idt,idt8t49n241";
                        #clock-cells = <1>;
                        reg = <0x6c>;

                        /* input clock(s); the XTAL is hard-wired on the ZCU104 board */
                        clocks = <&refhdmi>;
                        clock-names = "input-xtal";
                    };
                };
            };
        };
    };

    amba_pl: amba_pl@0 {

        /* 38.880MHz reference crystal for 8t49n241 clock for HDMI */
        /* IIC controller with 8t49n24x clock generator and DP159 retimer for HDMI TX */
        refhdmi: refhdmi {
                compatible = "fixed-clock";
                #clock-cells = <0>;
                clock-frequency = <38880000>;
        };

        axi_iic_0: i2c@a0000000 {
            #address-cells = <1>;
            #size-cells = <0>;
            clock-names = "s_axi_aclk";
            clocks = <&zynqmp_clk 71>;
            compatible = "xlnx,axi-iic-2.0", "xlnx,xps-iic-2.00.a";
            interrupt-names = "iic2intc_irpt";
            interrupt-parent = <&gic>;
            interrupts = <0 89 4>;
            reg = <0x0 0xa0000000 0x0 0x10000>;

                /* DP159 exposes a virtual CCF clock. Upon .set_rate(), it adapts its retiming/driving behaviour */
                dp159: hdmi-retimer@5e {
                        status = "okay";
                        compatible = "ti,dp159";
                        reg = <0x5e>;
                        #address-cells = <1>;
                        #size-cells = <0>;
                        #clock-cells = <0>;
                };
        };

        v_frmbuf_rd_0: v_frmbuf_rd@a0060000 {
            #dma-cells = <1>;
            clock-names = "ap_clk";
            clocks = <&zynqmp_clk 72>;
            compatible = "xlnx,v-frmbuf-rd-2.1", "xlnx,axi-frmbuf-rd-v2.1";
            interrupt-names = "interrupt";
            interrupt-parent = <&gic>;
            interrupts = <0 93 4>;
            reg = <0x0 0xa0060000 0x0 0x10000>;
            reset-gpios = <&gpio 78 1>;
            xlnx,dma-addr-width = <64>;
            xlnx,dma-align = <16>;
            xlnx,fid ;
            xlnx,max-height = <2160>;
            xlnx,max-width = <3840>;
            xlnx,pixels-per-clock = <2>;
            xlnx,s-axi-ctrl-addr-width = <0x7>;
            xlnx,s-axi-ctrl-data-width = <0x20>;
            xlnx,vid-formats = "rgb888", "xbgr8888", "xrgb8888", "bgr888", "uyvy", "y8", "vuy888", "xvuy8888", "yuyv", "nv12", "nv16";
            xlnx,video-width = <8>;
        };

        v_hdmi_tx_ss_0: v_hdmi_tx_ss@a0040000 {
            clock-names = "s_axi_cpu_aclk", "link_clk", "s_axis_audio_aclk", "video_clk", "s_axis_video_aclk", "txref-clk", "retimer-clk";
            clocks = <&zynqmp_clk 71>, <&misc_clk_0>, <&zynqmp_clk 71>, <&misc_clk_1>, <&zynqmp_clk 72>, <&idt8t49n24x 3>, <&dp159>;
            compatible = "xlnx,v-hdmi-tx-ss-3.1", "xlnx,v-hdmi-tx-ss-3.1";
            interrupt-names = "irq";
            interrupt-parent = <&gic>;
            interrupts = <0 92 4>;
            phy-names = "hdmi-phy0", "hdmi-phy1", "hdmi-phy2";
            phys = <&vphy_lane0 0 1 1 1>, <&vphy_lane1 0 1 1 1>, <&vphy_lane2 0 1 1 1>;
            reg = <0x0 0xa0040000 0x0 0x20000>;
            xlnx,input-pixels-per-clock = <2>;
            xlnx,max-bits-per-component = <8>;
            hdmitx_ports: ports {
                    #address-cells = <1>;
                    #size-cells = <0>;
                    encoder_hdmi_port: port@0 {
                            reg = <0>;
                            hdmi_encoder: endpoint {
                                    remote-endpoint = <&dmaengine_crtc>;
                            };
                    };
            };

        };

        v_drm_dmaengine_drv: drm-dmaengine-drv {
        #address-cells = <1>;
        #size-cells = <0>;
        /* Fill the fields xlnx,vformat based on user requirement */
        compatible = "xlnx,pl-disp";
        dma-names = "dma0";
        dmas = <&v_frmbuf_rd_0 0>;
        xlnx,vformat = "BG24";
        /*xlnx,vformat = "YUYV";*/

            dmaengine_port: port@0 {
                reg = <0>;
                dmaengine_crtc: endpoint {
                        remote-endpoint = <&hdmi_encoder>;
                };
            };
        };








        v_frmbuf_wr_0: v_frmbuf_wr@a0020000 {
            #dma-cells = <1>;
            clock-names = "ap_clk";
            clocks = <&zynqmp_clk 72>;
            compatible = "xlnx,v-frmbuf-wr-2.1", "xlnx,axi-frmbuf-wr-v2.1";
            interrupt-names = "interrupt";
            interrupt-parent = <&gic>;
            interrupts = <0 94 4>;
            reg = <0x0 0xa0020000 0x0 0x10000>;
            reset-gpios = <&gpio 79 1>;
            xlnx,dma-addr-width = <64>;
            xlnx,dma-align = <16>;
            xlnx,fid ;
            xlnx,max-height = <2160>;
            xlnx,max-width = <3840>;
            xlnx,pixels-per-clock = <2>;
            xlnx,s-axi-ctrl-addr-width = <0x7>;
            xlnx,s-axi-ctrl-data-width = <0x20>;
            xlnx,vid-formats = "rgb888", "bgr888", "xbgr8888", "xrgb8888", "uyvy", "y8", "vuy888", "xvuy8888", "yuyv", "nv12", "nv16";
            xlnx,video-width = <8>;
        };


        v_hdmi_rx_ss_0: v_hdmi_rx_ss@a0010000 {
            clock-names = "s_axi_cpu_aclk", "link_clk", "s_axis_audio_aclk", "video_clk", "s_axis_video_aclk";
            clocks = <&zynqmp_clk 71>, <&misc_clk_0>, <&zynqmp_clk 71>, <&misc_clk_1>, <&zynqmp_clk 72>;
            compatible = "xlnx,v-hdmi-rx-ss-3.1", "xlnx,v-hdmi-rx-ss-3.1";
            interrupt-names = "irq";
            interrupt-parent = <&gic>;
            interrupts = <0 90 4>;
            phy-names = "hdmi-phy0", "hdmi-phy1", "hdmi-phy2";
            phys = <&vphy_lane0 0 1 1 0>, <&vphy_lane1 0 1 1 0>, <&vphy_lane2 0 1 1 0>;
            reg = <0x0 0xa0010000 0x0 0x10000>;
            reg-names = "hdmi-rxss";
            xlnx,edid-ram-size = <0x100>;
            xlnx,input-pixels-per-clock = <2>;
            xlnx,max-bits-per-component = <8>;
            hdmirx_ports: ports {
                #address-cells = <1>;
                #size-cells = <0>;
                hdmirx_port: port@0 {
                        reg = <0>;
                        hdmi_rx_out: endpoint {
                                remote-endpoint = <&vcap_hdmi_in>;
                        };
                };
            };
        };
        
        vcap_hdmi {
            compatible = "xlnx,video";
            dma-names = "port0";
            dmas = <&v_frmbuf_wr_0 0>;
            vcap_hdmi_ports: ports {
                    #address-cells = <1>;
                    #size-cells = <0>;
                    vcap_hdmi_port: port@0 {
                            direction = "input";
                            reg = <0>;
                            vcap_hdmi_in: endpoint {
                                    remote-endpoint = <&hdmi_rx_out>;
                            };
                    };
            };
        };

    };
};
